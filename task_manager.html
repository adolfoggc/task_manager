<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Task Manager</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  </head>
  <body>
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="current-task-tab" data-bs-toggle="tab" data-bs-target="#current-task-tab-pane" type="button" role="tab" aria-controls="current-task-tab-pane" aria-selected="true">Task Atual</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="weekly-task-tab" data-bs-toggle="tab" data-bs-target="#weekly-task-tab-pane" type="button" role="tab" aria-controls="weekly-task-tab-pane" aria-selected="false">Tasks da Semana</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="monthly-task-tab" data-bs-toggle="tab" data-bs-target="#monthly-task-tab-pane" type="button" role="tab" aria-controls="monthly-task-tab-pane" aria-selected="false">Tasks do Mês</button>
      </li>
    </ul>
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active" id="current-task-tab-pane" role="tabpanel" aria-labelledby="current-task-tab" tabindex="0">
        <form>
          <div class="mb-3">
            <label for="task_name" class="form-label">Nome</label>
            <input type="text" class="form-control" id="task_name" aria-describedby="emailHelp">
          </div>
          <div class="mb-3">
            <label for="task_alias" class="form-label">Apelido</label>
            <input type="text" class="form-control" id="task_alias">
            <div type="text" class="form-text">Se não desejar criar um apelido, daremos um.</div>
          </div>
          <div class="btn btn-primary" onclick="save_current_task()">Submit</div>
        </form>
      </div>
      <div class="tab-pane fade" id="weekly-task-tab-pane" role="tabpanel" aria-labelledby="weekly-task-tab" tabindex="0">...</div>
      <div class="tab-pane fade" id="monthly-task-tab-pane" role="tabpanel" aria-labelledby="monthly-task-tab" tabindex="0">...</div>
    </div>    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
      $(function() {
        load_last_task();
      });

      function check_current_task(){
        console.log(get_current_task_data());
      }

      function save_current_task(){
        localStorage.setItem("current_task", get_current_task_data());
      }

      function load_last_task(){
        task = localStorage.getItem("current_task");
        task = JSON.parse(task);
        recover_current_task_data(task)
      }

      function recover_current_task_data(json){
        fields = ["task_name", "task_alias"]
        for(i = 0; i < fields.length; i++){
          task = fields[i];
          $("#" + task).val(json[task])
        }
      }

      function get_current_task_data(){
        json = {
          "task_name": $("#task_name").val(),
          "task_alias": $("#task_alias").val()
        };

        return JSON.stringify(json);
      }
    </script>
    </body>
  </body>
</html>